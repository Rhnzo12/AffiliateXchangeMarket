# AffiliateXchange Application Flowchart

## Overview

AffiliateXchange is a multi-sided marketplace connecting video content creators with brands for affiliate marketing opportunities and monthly retainer contracts.

---

## High-Level System Architecture

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                           AffiliateXchange Platform                          │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   ┌──────────────┐     ┌──────────────┐     ┌──────────────┐                │
│   │   CREATOR    │     │   COMPANY    │     │    ADMIN     │                │
│   │              │◄───►│              │◄───►│              │                │
│   │  - Browse    │     │  - Create    │     │  - Approve   │                │
│   │  - Apply     │     │    Offers    │     │  - Moderate  │                │
│   │  - Track     │     │  - Manage    │     │  - Monitor   │                │
│   │  - Earn      │     │  - Pay       │     │  - Settings  │                │
│   └──────┬───────┘     └──────┬───────┘     └──────┬───────┘                │
│          │                    │                    │                         │
│          └────────────────────┼────────────────────┘                         │
│                               ▼                                              │
│   ┌─────────────────────────────────────────────────────────────────────┐   │
│   │                        Backend Services                              │   │
│   │  ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────────┐    │   │
│   │  │  Auth   │ │Analytics│ │Payments │ │Messaging│ │ Moderation  │    │   │
│   │  └─────────┘ └─────────┘ └─────────┘ └─────────┘ └─────────────┘    │   │
│   └─────────────────────────────┬───────────────────────────────────────┘   │
│                                 ▼                                            │
│   ┌─────────────────────────────────────────────────────────────────────┐   │
│   │                         PostgreSQL Database                          │   │
│   └─────────────────────────────────────────────────────────────────────┘   │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## Main User Flows

### 1. User Registration & Onboarding Flow

```
┌─────────────┐
│   Visitor   │
└──────┬──────┘
       │
       ▼
┌─────────────┐     ┌─────────────┐
│   Landing   │────►│   Register  │
│    Page     │     │    Page     │
└─────────────┘     └──────┬──────┘
                           │
                           ▼
                    ┌─────────────┐
                    │ Select Role │
                    └──────┬──────┘
                           │
           ┌───────────────┼───────────────┐
           ▼               ▼               ▼
    ┌─────────────┐ ┌─────────────┐ ┌─────────────┐
    │   Creator   │ │   Company   │ │    Admin    │
    │ Onboarding  │ │ Onboarding  │ │  (Invite)   │
    └──────┬──────┘ └──────┬──────┘ └──────┬──────┘
           │               │               │
           ▼               ▼               ▼
    ┌─────────────┐ ┌─────────────┐ ┌─────────────┐
    │  Complete   │ │  Complete   │ │    Admin    │
    │   Profile   │ │   Profile   │ │  Dashboard  │
    │  + Niches   │ │ + Website   │ │             │
    └──────┬──────┘ └──────┬──────┘ └─────────────┘
           │               │
           ▼               ▼
    ┌─────────────┐ ┌─────────────┐
    │   Creator   │ │   Company   │
    │  Dashboard  │ │  Dashboard  │
    └─────────────┘ └─────────────┘
```

---

### 2. Creator Flow: Browse & Apply to Offers

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                              CREATOR FLOW                                    │
└─────────────────────────────────────────────────────────────────────────────┘

┌─────────────┐
│   Creator   │
│  Dashboard  │
└──────┬──────┘
       │
       ▼
┌─────────────┐     ┌─────────────────────────────────┐
│   Browse    │────►│  Filter Offers By:              │
│   Offers    │     │  - Niche (Gaming, Tech, etc.)   │
└──────┬──────┘     │  - Min Followers                │
       │            │  - Commission Type              │
       │            │  - Trending/Recommended         │
       │            └─────────────────────────────────┘
       ▼
┌─────────────┐
│ View Offer  │
│   Details   │
│  + Videos   │
└──────┬──────┘
       │
       ├──────────────────────────────┐
       ▼                              ▼
┌─────────────┐                ┌─────────────┐
│    Apply    │                │   Add to    │
│  to Offer   │                │  Favorites  │
└──────┬──────┘                └─────────────┘
       │
       ▼
┌─────────────┐
│  Submit     │
│ Application │
│ + Message   │
└──────┬──────┘
       │
       ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                         AUTO-APPROVAL PROCESS (7 Minutes)                    │
│  ┌─────────────┐     ┌─────────────┐     ┌─────────────┐                    │
│  │  Pending    │────►│  7 Minute   │────►│  Approved   │                    │
│  │   Status    │     │   Timer     │     │   Status    │                    │
│  └─────────────┘     └─────────────┘     └──────┬──────┘                    │
│                                                  │                           │
│                                                  ▼                           │
│                                          ┌─────────────┐                    │
│                                          │  Tracking   │                    │
│                                          │Link Created │                    │
│                                          └─────────────┘                    │
└─────────────────────────────────────────────────────────────────────────────┘
       │
       ▼
┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│   Share     │────►│   Track     │────►│  View in    │
│Tracking Link│     │   Clicks    │     │ Analytics   │
└─────────────┘     └─────────────┘     └─────────────┘
```

---

### 3. Company Flow: Create & Manage Offers

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                              COMPANY FLOW                                    │
└─────────────────────────────────────────────────────────────────────────────┘

┌─────────────┐
│   Company   │
│  Dashboard  │
└──────┬──────┘
       │
       ├────────────────────────────────────────┬───────────────────────┐
       ▼                                        ▼                       ▼
┌─────────────┐                          ┌─────────────┐         ┌─────────────┐
│   Create    │                          │   Create    │         │   Verify    │
│    Offer    │                          │  Retainer   │         │   Website   │
└──────┬──────┘                          │  Contract   │         └─────────────┘
       │                                 └─────────────┘
       ▼
┌─────────────┐
│ Fill Offer  │
│   Details   │
│ - Title     │
│ - Niche     │
│ - Commission│
└──────┬──────┘
       │
       ▼
┌─────────────┐
│   Upload    │
│   Videos    │
│  (6-12)     │
└──────┬──────┘
       │
       ▼
┌─────────────┐
│   Submit    │
│ for Review  │
└──────┬──────┘
       │
       ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                           ADMIN REVIEW PROCESS                               │
│  ┌─────────────┐     ┌─────────────┐     ┌─────────────┐                    │
│  │  Pending    │────►│   Admin     │────►│  Approved   │                    │
│  │   Review    │     │  Reviews    │     │  or Reject  │                    │
│  └─────────────┘     └─────────────┘     └─────────────┘                    │
└─────────────────────────────────────────────────────────────────────────────┘
       │
       ▼ (If Approved)
┌─────────────┐     ┌─────────────┐
│   Offer     │────►│  Receive    │
│    Live     │     │Applications │
└─────────────┘     └──────┬──────┘
                           │
                           ▼
                    ┌─────────────┐     ┌─────────────┐
                    │   Review    │────►│  Message    │
                    │ Applications│     │  Creator    │
                    └──────┬──────┘     └─────────────┘
                           │
                           ▼
                    ┌─────────────┐
                    │   Track     │
                    │ Performance │
                    └─────────────┘
```

---

### 4. Analytics & Tracking Flow

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                         ANALYTICS & TRACKING FLOW                            │
└─────────────────────────────────────────────────────────────────────────────┘

                    ┌─────────────┐
                    │  End User   │
                    │   Clicks    │
                    │Tracking Link│
                    └──────┬──────┘
                           │
                           ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                           CLICK PROCESSING                                   │
│                                                                              │
│  ┌─────────────┐     ┌─────────────┐     ┌─────────────┐                    │
│  │  Capture    │────►│   Fraud     │────►│  Store      │                    │
│  │   Click     │     │  Detection  │     │  Event      │                    │
│  │   Event     │     │   Scoring   │     │             │                    │
│  └─────────────┘     └─────────────┘     └─────────────┘                    │
│        │                                                                     │
│        │ Captured Data:                                                      │
│        │ - IP Address                                                        │
│        │ - Device Type                                                       │
│        │ - Browser                                                           │
│        │ - Geo-location                                                      │
│        │ - Timestamp                                                         │
│        │ - Referrer                                                          │
└────────┼────────────────────────────────────────────────────────────────────┘
         │
         ▼
┌─────────────┐     ┌─────────────┐
│  Redirect   │────►│   Brand     │
│    User     │     │   Website   │
└─────────────┘     └─────────────┘
         │
         ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                         ANALYTICS DASHBOARD                                  │
│                                                                              │
│  ┌────────────────┐  ┌────────────────┐  ┌────────────────┐                 │
│  │ Total Clicks   │  │ Unique Visitors│  │ Conversions    │                 │
│  │     12,543     │  │     8,271      │  │      342       │                 │
│  └────────────────┘  └────────────────┘  └────────────────┘                 │
│                                                                              │
│  ┌────────────────┐  ┌────────────────┐  ┌────────────────┐                 │
│  │   Earnings     │  │  Device Stats  │  │  Geo-Location  │                 │
│  │   $1,234.56    │  │  Mobile: 67%   │  │   USA: 45%     │                 │
│  └────────────────┘  └────────────────┘  └────────────────┘                 │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

### 5. Payment Flow

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                              PAYMENT FLOW                                    │
└─────────────────────────────────────────────────────────────────────────────┘

┌─────────────┐                              ┌─────────────┐
│   Creator   │                              │   Company   │
│   Earns     │◄────────────────────────────►│    Pays     │
│ Commission  │                              │ for Service │
└──────┬──────┘                              └──────┬──────┘
       │                                            │
       │                                            ▼
       │                                     ┌─────────────┐
       │                                     │   Stripe    │
       │                                     │   Payment   │
       │                                     └──────┬──────┘
       │                                            │
       │                    ┌───────────────────────┼───────────────────────┐
       │                    │                       ▼                       │
       │                    │               ┌─────────────┐                 │
       │                    │               │  Platform   │                 │
       │                    │               │  Fee (7%)   │                 │
       │                    │               └──────┬──────┘                 │
       │                    │                      │                        │
       │                    │    ┌─────────────────┴──────────────────┐     │
       │                    │    ▼                                    ▼     │
       │                    │ ┌─────────────┐                 ┌───────────┐ │
       │                    │ │  Creator    │                 │ Platform  │ │
       │                    │ │   (93%)     │                 │   (7%)    │ │
       │                    │ └─────────────┘                 └───────────┘ │
       │                    │                                               │
       │                    │              PAYMENT PROCESSING               │
       │                    └───────────────────────────────────────────────┘
       │
       ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                         PAYMENT METHODS                                      │
│                                                                              │
│   ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐        │
│   │   Stripe    │  │   PayPal    │  │ E-Transfer  │  │   Crypto    │        │
│   │   Connect   │  │             │  │             │  │             │        │
│   └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘        │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

### 6. Messaging Flow

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                            MESSAGING FLOW                                    │
└─────────────────────────────────────────────────────────────────────────────┘

┌─────────────┐                              ┌─────────────┐
│   Creator   │                              │   Company   │
└──────┬──────┘                              └──────┬──────┘
       │                                            │
       │         Start Conversation                 │
       │           (About Offer)                    │
       └────────────────┬───────────────────────────┘
                        │
                        ▼
               ┌─────────────────┐
               │   WebSocket     │
               │   Connection    │
               └────────┬────────┘
                        │
                        ▼
         ┌──────────────┴──────────────┐
         ▼                             ▼
┌─────────────────┐           ┌─────────────────┐
│  Send Message   │◄─────────►│ Receive Message │
│  + Attachments  │           │    Real-time    │
└────────┬────────┘           └─────────────────┘
         │
         ▼
┌─────────────────┐
│    Content      │
│   Moderation    │
│   (Keywords)    │
└────────┬────────┘
         │
    ┌────┴────┐
    ▼         ▼
┌───────┐ ┌───────┐
│ Pass  │ │ Flag  │
└───────┘ └───┬───┘
              │
              ▼
       ┌─────────────┐
       │   Admin     │
       │   Review    │
       └─────────────┘
```

---

### 7. Retainer Contract Flow

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                        RETAINER CONTRACT FLOW                                │
└─────────────────────────────────────────────────────────────────────────────┘

┌─────────────┐                              ┌─────────────┐
│   Company   │                              │   Creator   │
└──────┬──────┘                              └──────┬──────┘
       │                                            │
       ▼                                            │
┌─────────────┐                                     │
│   Create    │                                     │
│  Retainer   │                                     │
│  Contract   │                                     │
│ (30-50 vids)│                                     │
└──────┬──────┘                                     │
       │                                            │
       ▼                                            │
┌─────────────┐                                     │
│   Publish   │─────────────────────────────────────┘
│  Contract   │                                     │
└─────────────┘                                     │
                                                    │
                                                    ▼
                                             ┌─────────────┐
                                             │   Browse    │
                                             │  Retainers  │
                                             └──────┬──────┘
                                                    │
                                                    ▼
                                             ┌─────────────┐
                                             │   Apply to  │
                                             │  Retainer   │
                                             └──────┬──────┘
                                                    │
       ┌────────────────────────────────────────────┘
       │
       ▼
┌─────────────┐
│   Review    │
│ Application │
└──────┬──────┘
       │
       ├─────────────────────────────┐
       ▼                             ▼
┌─────────────┐               ┌─────────────┐
│   Approve   │               │   Reject    │
└──────┬──────┘               └─────────────┘
       │
       ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                        MONTHLY DELIVERABLE CYCLE                             │
│                                                                              │
│  ┌─────────────┐     ┌─────────────┐     ┌─────────────┐                    │
│  │  Creator    │────►│  Company    │────►│  Monthly    │                    │
│  │  Submits    │     │  Reviews    │     │  Payment    │                    │
│  │ Deliverable │     │ Deliverable │     │  Processed  │                    │
│  └─────────────┘     └─────────────┘     └─────────────┘                    │
│        ▲                    │                                                │
│        │                    │ (If Rejected)                                  │
│        │                    ▼                                                │
│        │             ┌─────────────┐                                         │
│        └─────────────│  Re-submit  │                                         │
│                      └─────────────┘                                         │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

### 8. Admin Flow

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                              ADMIN FLOW                                      │
└─────────────────────────────────────────────────────────────────────────────┘

                         ┌─────────────┐
                         │    Admin    │
                         │  Dashboard  │
                         └──────┬──────┘
                                │
        ┌───────────────────────┼───────────────────────┐
        │                       │                       │
        ▼                       ▼                       ▼
┌───────────────┐       ┌───────────────┐       ┌───────────────┐
│    Approve    │       │   Content     │       │   Platform    │
│  Companies &  │       │  Moderation   │       │   Settings    │
│    Offers     │       │               │       │               │
└───────┬───────┘       └───────┬───────┘       └───────┬───────┘
        │                       │                       │
        ▼                       ▼                       ▼
┌───────────────┐       ┌───────────────┐       ┌───────────────┐
│ Review Queue  │       │ Review Flags  │       │ Manage Niches │
│ - Companies   │       │ - Messages    │       │ - Add/Edit    │
│ - Offers      │       │ - Reviews     │       │ - Deactivate  │
└───────┬───────┘       └───────────────┘       └───────────────┘
        │
        ▼
┌───────────────┐
│ Approve/Reject│
│    + Notes    │
└───────────────┘


                        ┌───────────────────────────────────────┐
                        │           MONITORING                   │
                        │                                        │
                        │  ┌─────────────┐  ┌─────────────┐     │
                        │  │ Audit Logs  │  │  Platform   │     │
                        │  │             │  │   Health    │     │
                        │  └─────────────┘  └─────────────┘     │
                        │                                        │
                        │  ┌─────────────┐  ┌─────────────┐     │
                        │  │  Payment    │  │   Email     │     │
                        │  │  Disputes   │  │  Templates  │     │
                        │  └─────────────┘  └─────────────┘     │
                        │                                        │
                        └───────────────────────────────────────┘
```

---

## Complete Application Flow Summary

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                    AFFILIATEXCHANGE - COMPLETE FLOW                          │
└─────────────────────────────────────────────────────────────────────────────┘

                              ┌─────────────┐
                              │   VISITOR   │
                              └──────┬──────┘
                                     │
                                     ▼
                              ┌─────────────┐
                              │  REGISTER   │
                              └──────┬──────┘
                                     │
                 ┌───────────────────┼───────────────────┐
                 ▼                   ▼                   ▼
          ┌─────────────┐     ┌─────────────┐     ┌─────────────┐
          │   CREATOR   │     │   COMPANY   │     │    ADMIN    │
          └──────┬──────┘     └──────┬──────┘     └──────┬──────┘
                 │                   │                   │
                 ▼                   ▼                   │
          ┌─────────────┐     ┌─────────────┐           │
          │  Onboard &  │     │  Onboard &  │           │
          │   Profile   │     │   Verify    │           │
          └──────┬──────┘     └──────┬──────┘           │
                 │                   │                   │
                 │                   ▼                   │
                 │            ┌─────────────┐           │
                 │            │Create Offers│◄──────────┤ (Review)
                 │            │ & Retainers │           │
                 │            └──────┬──────┘           │
                 │                   │                   │
                 ▼                   │                   │
          ┌─────────────┐           │                   │
          │   Browse    │◄──────────┘                   │
          │   Offers    │                               │
          └──────┬──────┘                               │
                 │                                      │
                 ▼                                      │
          ┌─────────────┐                               │
          │    Apply    │                               │
          └──────┬──────┘                               │
                 │                                      │
                 ▼                                      │
       ┌─────────────────┐                              │
       │  AUTO-APPROVE   │                              │
       │   (7 minutes)   │                              │
       └────────┬────────┘                              │
                │                                       │
                ▼                                       │
       ┌─────────────────┐                              │
       │ TRACKING LINK   │                              │
       └────────┬────────┘                              │
                │                                       │
                ▼                                       │
       ┌─────────────────┐         ┌─────────────────┐ │
       │   SHARE LINK    │────────►│   TRACK CLICKS  │ │
       └─────────────────┘         └────────┬────────┘ │
                                            │          │
                                            ▼          │
                                   ┌─────────────────┐ │
                                   │    ANALYTICS    │◄┘ (Monitor)
                                   └────────┬────────┘
                                            │
                                            ▼
                                   ┌─────────────────┐
                                   │    EARNINGS     │
                                   └────────┬────────┘
                                            │
                                            ▼
                                   ┌─────────────────┐
                                   │    PAYMENTS     │
                                   │   (7% Fee)      │
                                   └─────────────────┘
```

---

## Tech Stack

| Layer | Technology |
|-------|------------|
| Frontend | React 18, TypeScript, TailwindCSS, shadcn/ui |
| Routing | Wouter |
| State | React Query |
| Backend | Express.js, Node.js |
| Database | PostgreSQL (Neon) |
| ORM | Drizzle |
| Real-time | WebSocket |
| Auth | Passport.js, Google OAuth, 2FA |
| Payments | Stripe, PayPal |
| Storage | Google Cloud Storage |
| Email | SendGrid |

---

## Key Business Rules

1. **Auto-Approval**: Applications auto-approve after 7 minutes with tracking link
2. **Platform Fee**: 7% on all transactions
3. **Video Requirements**: Offers require 6-12 promotional videos
4. **Retainer Contracts**: 30-50 videos per month
5. **Fraud Detection**: Click events scored for fraud indicators
6. **Content Moderation**: Keyword-based filtering with admin review
